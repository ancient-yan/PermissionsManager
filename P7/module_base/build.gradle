apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
apply plugin: 'kotlin-kapt'

kapt {
    arguments {
        arg("AROUTER_MODULE_NAME", project.getName())
    }
}

androidExtensions {
    experimental = true
}

boolean openDebug = isOpenDebug.toBoolean()

android {

    compileSdkVersion rootProject.compileSdkVersion
    buildToolsVersion rootProject.buildToolsVersion
    defaultConfig {
        minSdkVersion rootProject.minSdkVersion
        targetSdkVersion rootProject.targetSdkVersion
        versionCode 1
        versionName "1.0"
        buildConfigField("boolean", "openDebug", "$openDebug")
        vectorDrawables.useSupportLibrary = true

//        externalNativeBuild {
//            cmake {
//                cppFlags ""
//            }
//        }
//        ndk（v17）已不在支持mips、armeabi等CPU架构，只支持armeabi-v7a, arm64-v8a, x86, x86_64

    }


    lintOptions {
        abortOnError false
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    sourceSets {
        main {
            java.srcDirs += "src/github/java"
            res.srcDirs += "src/github/res"
            if (openDebug) {
                java.srcDirs += "src/tools/java"
                res.srcDirs += "src/tools/res"
            }
        }
    }

    externalNativeBuild {
        cmake {
//            path "src/main/cpp/CMakeLists.txt"
        }
    }

}

dependencies {

    api fileTree(dir: 'libs', include: ['*.jar'])

    //测试
    testImplementation testLibraries.junit

    //基础组件库
    api project(':lib:lib_base')//基础类库
    api project(':lib:lib_network')//基础网络库
    api project(':lib:lib_media_selector')//媒体选择器
    api project(':lib:lib_qrcode')//二维码
    api project(':lib:lib_cache')//缓存库
    api project(':lib:lib_social')//第三方登录、分享、支付
    implementation project(':lib:lib_push')//推送

    //Android
    api androidLibraries.androidCard
    api androidLibraries.multiDex
    api androidLibraries.androidExif
    api androidLibraries.flexbox

    //kotlin
    api kotlinLibraries.rxKotlin

    //Third Library(apt放前面)
    /*Dagger2*/
    kapt thirdLibraries.dagger2Apt
    kapt thirdLibraries.dagger2AndroidApt
    /*ARouter*/
    api thirdLibraries.arouter
    kapt thirdLibraries.arouterAnnotation
    /*OkHttp*/
    implementation thirdLibraries.okHttp
    implementation thirdLibraries.okHttpLogging
    /*gson*/
    api thirdLibraries.gson
    /*retrofit*/
    api thirdLibraries.retrofit
    implementation thirdLibraries.retrofitConverterGson
    implementation thirdLibraries.retrofitRxJava2CallAdapter
    /*rx binding*/
    api thirdLibraries.rxBindingCompat
    /*glideAPT*/
    kapt thirdLibraries.glideApt
    //channel
    implementation thirdLibraries.vasDolly
    //permission
    api thirdLibraries.andPermission

    /*UI*/
    implementation(uiLibraries.androidWheelPicker) {
        exclude group: 'com.android.support'
    }
    api(uiLibraries.qmui) {
        exclude group: 'com.android.support'
    }
    api uiLibraries.circleImageView
    api uiLibraries.roundedImageView
    api uiLibraries.superTextView
    api uiLibraries.keyboardvisibilityevent
    api uiLibraries.smartTab
    api 'me.zhanghai.android.materialprogressbar:library:1.4.2'
    api uiLibraries.photoView

    //bugly
    implementation 'com.tencent.bugly:crashreport_upgrade:1.3.6'
    implementation 'com.tencent.tinker:tinker-android-lib:1.9.14'
    implementation 'com.tencent.bugly:nativecrashreport:3.6.0.1'
    //you meng
//    api 'com.umeng.umsdk:analytics:8.0.0'
//    implementation 'com.umeng.umsdk:common:2.0.0'

    //Debug
    if (openDebug) {
        //stetho
        implementation debugLibraries.stetho
        implementation debugLibraries.stethoOkhttp3
        //LeakCanary
        implementation debugLibraries.debugLeakCanary
        //UETool
        implementation debugLibraries.ueTool
    }
    //http://www.msa-alliance.cn/ 通过移动安全联盟获取设备唯一标识
    implementation files('libs/msa_mdid_1.0.13.aar')
}